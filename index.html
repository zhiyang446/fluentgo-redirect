<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FluentGo Redirect</title>
</head>
<body>
  <p>Redirecting...</p>
  <script>
    function redirect() {
      // 先查 query (?code=xxx)
      const queryParams = new URLSearchParams(window.location.search);
      let code = queryParams.get("code");

      // 再查 hash (#access_token=xxx)
      if (!code) {
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        code = hashParams.get("code") || hashParams.get("access_token");
      }

      if (code) {
        // 跳转 confirm-email.html 并把 code 带过去
        window.location.replace(`confirm-email.html?code=${encodeURIComponent(code)}`);
      } else {
        document.body.innerHTML = "<p>Invalid redirect: no code found.</p>";
      }
    }

    redirect();
  </script>
</body>
</html>
